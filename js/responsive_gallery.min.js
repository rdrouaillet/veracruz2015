(function(e){function t(){if(e.gallery.settings.single||e.gallery.settings.images.length<=1){var t=e('<div class="gallery-controls"><a href="#" class="gallery-btn btn-close"></a></div>').css("width",e("#gallery-images").width())}else{var t=e('<div class="gallery-controls"><!--<a href="#" class="gallery-btn btn-play btn-playback"></a>--><a href="#" class="gallery-btn btn-prev"></a><a href="#" class="gallery-btn btn-next"></a><!--<p class="gallery-info"><span class="gallery-current">'+(e.gallery.settings.index+1)+'</span>/<span class="gallery-total">'+e.gallery.settings.images.length+'</span></p>--><a href="#" class="gallery-btn btn-close"></a></div>').css("width",e("#gallery-images").width())}e("#gallery-images").append(t);e(".btn-close").click(function(e){e.preventDefault();i()});e(".btn-next").click(function(e){e.preventDefault();r("next")});e(".btn-prev").click(function(e){e.preventDefault();r("prev")});e(".btn-playback").click(function(t){t.preventDefault();if(e.gallery.playing){clearInterval(e.gallery.interval);e(this).removeClass("btn-pause").addClass("btn-play");e.gallery.playing=false}else{e.gallery.interval=setInterval(function(){r("next")},e.gallery.settings.interval);e(this).removeClass("btn-play").addClass("btn-pause");e.gallery.playing=true}});e.gallery.controls=true}function n(){if(e.gallery.settings.type=="images"){var t=e.gallery.settings.images[e.gallery.settings.index]}else{var t=e.gallery.settings.href}var n=e('<div id="gallery-social" class="hidden-sm hidden-xs addthis_toolbox addthis_default_style addthis_32x32_style" addthis:url=" '+t+'"><a class="addthis_button_facebook fb at300b"></a><a class="addthis_button_twitter tw at300b"></a><a class="addthis_button_linkedin lkin at300b"></a><a class="addthis_button_pinterest_share pint at300b"></a><a class="addthis_button_google_plusone_share plus at300b"></a></div>');e("#gallery-images").append(n);if(e.gallery.settings.single){e("#gallery-social").addClass("single")}addthis.toolbox("#gallery-social");e.gallery.social=true}function r(t){if(t=="next"){e.gallery.settings.index++}else if(t=="prev"){e.gallery.settings.index--}if(e.gallery.settings.index<0){e.gallery.settings.index=e.gallery.settings.images.length-1}if(e.gallery.settings.index>e.gallery.settings.images.length-1){e.gallery.settings.index=0}u()}function i(){clearInterval(e.gallery.interval);e.gallery.container.fadeOut().remove();e("body").css({overflow:"auto"})}function s(r){var i=e(window),s=parseInt(i.width()),o=parseInt(i.height()),u=e("#gallery-images"),a="landscape";e.gallery.iWidth=r.width;e.gallery.iHeight=r.height;m();if(e.gallery.displayed){e("#gallery-image").fadeOut()}v(function(){if(!e.gallery.displayed){e("#gallery-images").html('<div id="gallery-image"></div>');e.gallery.displayed=true;e(r).appendTo(e("#gallery-image").fadeIn());if(!e.gallery.settings.single&&e.gallery.settings.thumbnails){l()}}else{e(r).appendTo(e("#gallery-image").empty().fadeIn())}if(!e.gallery.controls){t()}else{e(".gallery-controls").width(e("#gallery-images").width());e(".gallery-current").html(e.gallery.settings.index+1)}if(!e.gallery.social){n()}else{e("#gallery-social").attr("addthis:url",e.gallery.settings.images[e.gallery.settings.index]);addthis.toolbox("#gallery-social")}})}function o(){var t=e(window);e.gallery.loader=e('<span id="gallery-image-loader"></span>');e.gallery.content=e('<div id="gallery-content"><h1 id="gallery-title"></h1><div id="gallery-images"></div></div>').css({top:parseInt(t.height())/2-10+t.scrollTop(),left:parseInt(t.width())/2-10,position:"absolute"});e.gallery.container.append(e.gallery.content);e("#gallery-images").html(e.gallery.loader)}function u(){e('<img src="'+e.gallery.settings.images[e.gallery.settings.index]+'">').load(function(){e.gallery.loader.fadeOut().remove();s(this)})}function a(){var r=e(window),i=parseInt(r.width()),s=parseInt(r.height()),o=e("#gallery-images"),u=new RegExp("[\\?&]v=([^&#]*)"),a=u.exec(e.gallery.settings.href),f=a==null?"":decodeURIComponent(a[1].replace(/\+/g," "));e.gallery.iWidth=560;e.gallery.iHeight=315;m();e.gallery.loader.fadeOut().remove();v(function(){o.html('<div id="gallery-image"><iframe width="'+(e.gallery.imagesWidth-26)+'" height="'+(e.gallery.imagesHeight-100)+'" src="//www.youtube.com/embed/'+f+'" frameborder="0" allowfullscreen></iframe></div>');e.gallery.displayed=true;n();t()})}function f(t,n){e('<img src="'+e.gallery.settings.images[t]+'" width="50">').load(function(){var r=e('<li class="thumbnail-item"></li>');n.append(r);e(this).appendTo(r);t++;if(t==e.gallery.settings.images.length){e(".thumbnail-item").each(function(t,n){e(n).click(function(n){n.preventDefault();e.gallery.settings.index=t;u()})})}else{f(t,n)}})}function l(){e.gallery.thumbnails=e('<div id="gallery-thumbnails"><ul class="thumbnails-list"></ul></div>');if(!e.gallery.thumbs_displayed){e.gallery.thumbs_displayed=true;e("#gallery-images").append(e.gallery.thumbnails)}var t=e("#gallery-images").width(),n=Math.ceil((t-120)/60);maxThumbs=n>13?13:n;if(e.gallery.settings.images.length<maxThumbs){var r=e.gallery.settings.images.length,i=e.gallery.settings.images.length*60}else{var r=maxThumbs,i=maxThumbs*60}e.gallery.thumbnails.css({width:i,left:(e("#gallery-images").width()-i)/2});var s=Math.ceil(e.gallery.settings.images.length/r),o=e.gallery.thumbnails.find(".thumbnails-list").css({width:s*780}),u=0;f(u,o);if(s>1){y(s)}}function c(){var t=e(window);e.gallery.content.stop().css({top:(t.height()-e.gallery.imagesHeight)/2+t.scrollTop(),left:(t.width()-e.gallery.imagesWidth)/2})}function h(){e(".thumbnails-prev").unbind("click").remove();e(".thumbnails-next").unbind("click").remove()}function p(){e.gallery.container=e('<div id="gallery-container"></div>').css({display:"none",width:e("body").width(),height:e("body").height(),position:"absolute",left:0,top:0,zIndex:e.gallery.settings.zIndex});e("body").append(e.gallery.container)}function d(){e(document).unbind("keydown.gallery").bind("keydown.gallery",function(e){switch(e.keyCode){case 37:e.preventDefault();r("prev");break;case 39:e.preventDefault();r("next");break;case 27:i();e.preventDefault();break}})}function v(t){var n=e("#gallery-images");n.animate({width:e.gallery.imagesWidth,height:e.gallery.imagesHeight,padding:"10px"},{complete:t});c();e(window).scroll(c);e(window).resize(function(){e.gallery.container.stop().css({width:e("body").width(),height:e("body").height()});m();c();n.stop().animate({width:e.gallery.imagesWidth,height:e.gallery.imagesHeight,padding:"10px"},{duration:0,complete:function(){if(e.gallery.settings.type=="images"){var r=n.width(),i=Math.ceil((r-120)/60);maxThumbs=i>13?13:i;if(e.gallery.settings.images.length<maxThumbs){var s=e.gallery.settings.images.length,o=e.gallery.settings.images.length*60}else{var s=maxThumbs,o=maxThumbs*60}e.gallery.thumbnails.css({width:o,left:(e("#gallery-images").width()-o)/2});var u=Math.ceil(e.gallery.settings.images.length/s);if(u>1){y(u)}else{h()}}e(".gallery-controls").width(n.width());t.call()}})})}function m(){var t=e(window),n=parseInt(t.width()),r=parseInt(t.height());if(n>e.gallery.iWidth+60){imagesWidth=e.gallery.iWidth+26;imagesHeight=e.gallery.iHeight+100}else{imagesWidth=n-60;imagesHeight=imagesWidth*e.gallery.iHeight/e.gallery.iWidth+100}if(imagesHeight>=r){imagesHeight=r-60;imagesWidth=imagesHeight*e.gallery.iWidth/e.gallery.iHeight-200}e.gallery.imagesWidth=imagesWidth;e.gallery.imagesHeight=imagesHeight}function g(){e.gallery.overlay=e('<div id="gallery-overlay"></div>').css({"background-color":"#000",width:"100%",height:"100%",opacity:e.gallery.settings.opacity,position:"absolute"});e.gallery.container.append(e.gallery.overlay).fadeIn(e.gallery.settings.animationSpeed);e.gallery.overlay.click(function(e){e.preventDefault();i()})}function y(t){var n=0,r=e.gallery.thumbnails.find(".thumbnails-list"),i=function(){r.animate({"margin-left":"-"+n*100+"%"},{easing:"easeInQuad",duration:1e3})};if(!e.gallery.nav_displayed){e.gallery.nav_displayed=true;e("#gallery-images").append(e('<a href="#" class="gallery-btn thumbnails-prev"></a><a href="#" class="gallery-btn thumbnails-next"></a>'))}else{e(".thumbnails-prev").unbind("click");e(".thumbnails-next").unbind("click")}e(".thumbnails-prev").click(function(e){e.preventDefault();n--;if(n<0){n=0}i()});e(".thumbnails-next").click(function(e){e.preventDefault();n++;if(n>=t){n=t-1}i()})}e.gallery={version:"1.0.0"};e.fn.gallery=function(t){e.gallery.settings=e.extend({allowKeyboard:true,animationSpeed:600,interval:3e3,opacity:.8,zIndex:1e3,single:false,thumbnails:true,type:"images",href:"",index:0},t);e.gallery.initialized=false;e.gallery.controls=false;e.gallery.displayed=false;e.gallery.playing=false;e.gallery.social=false;e.gallery.thumbs_displayed=false;e.gallery.nav_displayed=false;p();g();o();if(e.gallery.settings.type=="images"){u()}else{a()}if(e.gallery.settings.allowKeyboard){d()}return this}})(jQuery)